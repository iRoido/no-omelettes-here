<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No Omelettes Here</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            background-color: #121212;  /* Dark background */
            color: #E0E0E0;  /* Light text color */
            height: 100vh;  /* Ensure it covers the full viewport */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        h1, p { 
            margin: 20px 0; 
        }
        #eggList { 
            margin-top: 20px; 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center;
        }
        .egg { 
            margin: 10px; 
            padding: 10px; 
            border: 1px solid #333; 
            display: inline-block;
            background-color: #1E1E1E;
            border-radius: 8px;
        }
        img { 
            width: 100px; 
            height: 100px; 
            border-radius: 5px; 
            margin-bottom: 10px;
        }
        input, button { 
            padding: 10px; 
            margin: 10px 0; 
            border: 1px solid #333; 
            background-color: #1E1E1E; 
            color: #E0E0E0;
            border-radius: 5px;
        }
        button { 
            cursor: pointer; 
        }
        button:hover { 
            background-color: #333; 
        }
    </style>
</head>
<body>
    <h1>No Omelettes Here</h1>
    <p>Helping eggs, not frying them!</p>
    <p>Submit your Dragon Cave egg URLs below.</p>
    
    <form id="eggForm">
        <input type="text" id="eggURL" placeholder="Enter egg URL (e.g., https://dragcave.net/view/[eggID])" required>
        <button type="submit">Add Egg</button>
    </form>
    
    <div id="eggList"></div>
    
    <script>
        // Load eggs from localStorage
        function loadEggs() {
            const storedEggs = JSON.parse(localStorage.getItem('eggs')) || [];
            storedEggs.forEach(egg => {
                displayEgg(egg.url);
            });
        }

        // Function to display an egg
        function displayEgg(url) {
            console.log("Adding egg:", url);  // Debugging: Log the URL

            const eggList = document.getElementById('eggList');
            const eggDiv = document.createElement('div');
            eggDiv.className = 'egg';

            // Get the egg ID from the URL
            const eggID = getEggIDFromURL(url);
            console.log("Egg ID:", eggID);  // Debugging: Log the extracted egg ID

            if (eggID) {
                const eggImageURL = `https://dragcave.net/images/eggs/${eggID}.png`;
                console.log("Egg image URL:", eggImageURL);  // Debugging: Log the egg image URL

                // Create the image element with the egg image URL
                const img = document.createElement('img');
                img.src = eggImageURL;  // Generated egg image URL
                img.alt = "Egg Image";

                // Create a link to the egg
                const eggLink = document.createElement('a');
                eggLink.href = url;
                eggLink.target = "_blank";
                eggLink.textContent = url;

                // Append the image and link to the eggDiv
                eggDiv.appendChild(img);
                eggDiv.appendChild(eggLink);

                // Append eggDiv to the list
                eggList.appendChild(eggDiv);
            } else {
                console.error("Invalid egg URL or ID");  // Debugging: Log if the ID is not valid
            }
        }

        // Function to get egg ID from URL
        function getEggIDFromURL(url) {
            const match = url.match(/\/view\/(\d+)/);
            return match ? match[1] : null;  // Return the egg ID (numeric ID) or null if not valid
        }

        // Event listener for form submission
        document.getElementById('eggForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const url = document.getElementById('eggURL').value;

            if (url) {
                // Display the new egg immediately
                displayEgg(url);

                // Save the egg to localStorage
                const storedEggs = JSON.parse(localStorage.getItem('eggs')) || [];
                storedEggs.push({ url: url });
                localStorage.setItem('eggs', JSON.stringify(storedEggs));

                // Clear the input field
                document.getElementById('eggURL').value = '';
            }
        });

        // Load eggs when the page loads
        window.onload = loadEggs;
    </script>
</body>
</html>
