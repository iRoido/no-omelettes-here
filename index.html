<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No Omelettes Here</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #121212; color: white; }
        #eggList { margin-top: 20px; }
        .egg { margin: 10px; padding: 10px; border: 1px solid #ccc; display: inline-block; }
        img { max-width: 100px; }
        input[type="text"] { padding: 5px; width: 250px; }
        button { padding: 5px 10px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #45a049; }
    </style>
</head>
<body>
    <h1>No Omelettes Here</h1>
    <p>Helping eggs, not frying them!</p>
    <p>Submit your Dragon Cave eggs below.</p>
    
    <form id="eggForm">
        <input type="text" id="eggURL" placeholder="Enter egg/hatchling URL" required>
        <button type="submit">Add Egg</button>
    </form>
    
    <div id="eggList"></div>
    
    <script>
        // Function to extract the egg ID from the URL
        function getEggIDFromURL(url) {
            const regex = /view\/([A-Za-z0-9]+)/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        // Function to display the egg
        function displayEgg(url) {
            console.log("Adding egg:", url);  // Debugging: Log the URL

            const eggList = document.getElementById('eggList');
            const eggDiv = document.createElement('div');
            eggDiv.className = 'egg';

            // Get the egg ID from the URL
            const eggID = getEggIDFromURL(url);
            console.log("Egg ID:", eggID);  // Debugging: Log the extracted egg ID

            if (eggID) {
                const eggImageURL = `https://dragcave.net/images/eggs/${eggID}.gif`; // Changed to .gif
                console.log("Egg image URL:", eggImageURL);  // Debugging: Log the egg image URL

                // Create the image element with the egg image URL
                const img = document.createElement('img');
                img.src = eggImageURL;  // Generated egg image URL
                img.alt = "Egg Image";
                
                // Add an error event listener to handle missing images
                img.onerror = function() {
                    console.error("Egg image not found, using placeholder.");
                    img.src = "https://via.placeholder.com/100?text=No+Image"; // Fallback image
                };

                // Create a link to the egg
                const eggLink = document.createElement('a');
                eggLink.href = url;
                eggLink.target = "_blank";
                eggLink.textContent = url;

                // Append the image and link to the eggDiv
                eggDiv.appendChild(img);
                eggDiv.appendChild(eggLink);

                // Append eggDiv to the list
                eggList.appendChild(eggDiv);
            } else {
                console.error("Invalid egg URL or ID");  // Debugging: Log if the ID is not valid
            }
        }

        // Event listener for the form submission
        document.getElementById('eggForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const url = document.getElementById('eggURL').value;
            if (url) {
                displayEgg(url);  // Display the egg when the form is submitted
                document.getElementById('eggURL').value = '';  // Clear the input field
            }
        });
    </script>
</body>
</html>
